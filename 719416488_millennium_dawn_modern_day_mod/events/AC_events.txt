############################################################################################################
#	AC mod - events
############################################################################################################

add_namespace = AC_event

country_event = { #Offer of Investments
	id = AC_event.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event AC_event.1" }
	title = AC_event.1.t
	desc = AC_event.1.d
	picture = GFX_united_states_dollar
	is_triggered_only = yes

	option = { name = AC_event.1.o1
		log = "[GetDateText]: [This.GetName]: AC_event.1.o1 executed"
		ai_chance = {
			base = 1
			modifier = {
				add = 1
				FROM = { has_idea = NATO_member }
				has_idea = NATO_member
			}
			modifier = {
				add = 1
				FROM = { has_idea = EU_member }
				has_idea = EU_member
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value > 10 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value > 30 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value > 60 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value > 100 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value > 140 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value > 180 }
			}
			modifier = {
				add = 1
				OR = {
					AND = {
						has_government = democratic
						FROM = { has_government = democratic }
					}
					AND = {
						has_government = neutrality
						FROM = { has_government = neutrality }
					}
					AND = {
						has_government = fascism
						FROM = { has_government = fascism }
					}
					AND = {
						has_government = nationalist
						FROM = { has_government = nationalist }
					}
					AND = {
						has_government = communism
						FROM = { has_government = communism }
					}
				}
			}
			modifier = {
				add = 1
				any_owned_state = {
					OR = {
						free_building_slots = {
							building = industrial_complex
							size > 0
							include_locked = no
						}
						infrastructure < 10
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					has_idea = gdp_1
					has_idea = gdp_2
					has_idea = gdp_3
					has_idea = gdp_4
					has_idea = gdp_5
					has_idea = gdp_6
					has_idea = gdp_7
				}
			}
			modifier = {
				add = 5
				num_of_factories < 50
			}
			modifier = { #More likely if you are a top influencer
				factor = 2
				OR = {
					check_variable = { influence_array^0 = FROM }
					check_variable = { influence_array^1 = FROM }
					check_variable = { influence_array^2 = FROM }
				}
			}
		}

		hidden_effect = {
			FROM = {
				### activate project
				if = {
					limit = {
						check_variable = { AC_building_type_selected = 1 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state1_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_INF_decision1 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_INF_decision1 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state2_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_INF_decision2 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_INF_decision2 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state3_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_INF_decision3 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_INF_decision3 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state4_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_INF_decision4 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_INF_decision4 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state5_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_INF_decision5 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_INF_decision5 } }
					}
				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 2 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state1_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AB_decision1 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AB_decision1 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state2_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AB_decision2 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AB_decision2 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state3_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AB_decision3 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AB_decision3 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state4_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AB_decision4 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AB_decision4 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state5_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AB_decision5 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AB_decision5 } }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 3 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state1_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AA_decision1 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AA_decision1 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state2_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AA_decision2 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AA_decision2 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state3_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AA_decision3 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AA_decision3 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state4_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AA_decision4 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AA_decision4 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state5_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_AA_decision5 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_AA_decision5 } }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 4 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state1_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_RAD_decision1 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_RAD_decision1 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state2_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_RAD_decision2 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_RAD_decision2 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state3_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_RAD_decision3 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_RAD_decision3 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state4_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_RAD_decision4 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_RAD_decision4 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state5_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_RAD_decision5 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_RAD_decision5 } }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 5 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state1_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_MIC_decision1 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_MIC_decision1 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state2_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_MIC_decision2 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_MIC_decision2 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state3_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_MIC_decision3 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_MIC_decision3 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state4_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_MIC_decision4 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_MIC_decision4 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state5_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_MIC_decision5 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_MIC_decision5 } }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 6 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state1_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_CIC_decision1 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_CIC_decision1 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state2_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_CIC_decision2 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_CIC_decision2 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state3_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_CIC_decision3 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_CIC_decision3 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state4_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_CIC_decision4 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_CIC_decision4 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state5_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_CIC_decision5 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_CIC_decision5 } }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 7 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state1_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_NIC_decision1 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_NIC_decision1 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state2_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_NIC_decision2 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_NIC_decision2 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state3_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_NIC_decision3 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_NIC_decision3 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state4_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_NIC_decision4 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_NIC_decision4 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state5_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_NIC_decision5 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_NIC_decision5 } }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 8 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state1_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_REF_decision1 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_REF_decision1 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state2_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_REF_decision2 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_REF_decision2 } }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state3_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_REF_decision3 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_REF_decision3 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state4_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_REF_decision4 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_REF_decision4 } }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state5_@FROM }
						}
						activate_targeted_decision = { target = PREV decision = AC_construction_REF_decision5 }
						PREV = { activate_targeted_decision = { target = FROM decision = AC_construction_target_REF_decision5 } }
					}
				}

				event_target:AC_state_event_target = { clr_state_flag = Investment_pause_@FROM }
				### reset selected build ammount
				set_variable = { AC_build_amount = 1 }
			}
			if = {
				limit = { NOT = { has_country_flag = influence_gained_@FROM } }
				set_temp_variable = { AC_influence_gain = FROM.AC_build_cost }
				if = {
					limit = {
						FROM = {
							OR = {
								check_variable = { AC_building_type_selected = 1 } #Infra
								check_variable = { AC_building_type_selected = 2 } #Air Base
								check_variable = { AC_building_type_selected = 3 } #AA
								check_variable = { AC_building_type_selected = 4 } #Radar
							}
						}
					}
					divide_temp_variable = { AC_influence_gain = 1.5 }
				}
				else = {
					divide_temp_variable = { AC_influence_gain = 2.5 }
				}
				multiply_temp_variable = { AC_influence_gain = FROM.influence_multiplier }
				round_temp_variable = AC_influence_gain
				for_loop_effect = {
					end = influence_array^num
					value = v
					if = {
						limit = {
							check_variable = { influence_array^v = FROM }
						}
						add_to_variable = { influence_array_val^v = AC_influence_gain }
						set_country_flag = found
					}
				}
				if = {
					limit = { NOT = { has_country_flag = found } }
					add_to_array = { influence_array = FROM.id }
					add_to_array = { influence_array_val = AC_influence_gain }
				}
				clr_country_flag = found
				recalculate_influence = yes
				set_country_flag = { flag = influence_gained_@FROM value = 1 days = 14 }
			}

			#take 25% of the cost
			custom_effect_tooltip = AC_event.1.o1_TT
			set_temp_variable = { temp_investment = FROM.AC_build_cost }
			divide_temp_variable = { temp_investment = 4 }
			subtract_from_variable = { treasury = temp_investment }
		}
	}

	option = { name = AC_event.1.o2 # refuse
		log = "[GetDateText]: [This.GetName]: AC_event.1.o2 executed"
		hidden_effect = {
			FROM = {
				### activate project
				if = {
					limit = {
						check_variable = { AC_building_type_selected = 1 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state1_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_INF_target_state1_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state2_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_INF_target_state2_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state3_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_INF_target_state3_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state4_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_INF_target_state4_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_INF_target_state5_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_INF_target_state5_@FROM }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 2 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state1_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AB_target_state1_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state2_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AB_target_state2_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state3_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AB_target_state3_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state4_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AB_target_state4_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AB_target_state5_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AB_target_state5_@FROM }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 3 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state1_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AA_target_state1_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state2_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AA_target_state2_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state3_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AA_target_state3_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state4_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AA_target_state4_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_AA_target_state5_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_AA_target_state5_@FROM }
					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 4 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state1_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_RAD_target_state1_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state2_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_RAD_target_state2_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state3_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_RAD_target_state3_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state4_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_RAD_target_state4_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_RAD_target_state5_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_RAD_target_state5_@FROM }

					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 5 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state1_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_MIC_target_state1_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state2_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_MIC_target_state2_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state3_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_MIC_target_state3_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state4_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_MIC_target_state4_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_MIC_target_state5_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_MIC_target_state5_@FROM }
					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 6 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state1_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_CIC_target_state1_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state2_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_CIC_target_state2_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state3_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_CIC_target_state3_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state4_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_CIC_target_state4_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_CIC_target_state5_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_CIC_target_state5_@FROM }
					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 7 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state1_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_NIC_target_state1_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state2_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_NIC_target_state2_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state3_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_NIC_target_state3_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state4_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_NIC_target_state4_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_NIC_target_state5_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_NIC_target_state5_@FROM }
					}


				}
				else_if = {
					limit = {
						check_variable = { AC_building_type_selected = 8 }
					}
					if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state1_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_REF_target_state1_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state2_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_REF_target_state2_@FROM }
					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state3_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_REF_target_state3_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state4_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_REF_target_state4_@FROM }

					}
					else_if = {
						limit = {
							event_target:AC_state_event_target = { has_state_flag = AC_construction_REF_target_state5_@FROM }
						}
						event_target:AC_state_event_target = { clr_state_flag = AC_construction_REF_target_state5_@FROM }
					}


				}

				event_target:AC_state_event_target = { clr_state_flag = Investment_pause_@FROM }
				### reset selected build ammount
				set_variable = { AC_build_amount = 1 }
			}

			#event_target:AC_state_event_target = { AC_clear_state_flag = yes clr_state_flag = Investment_pause_@FROM }
			FROM = {
				set_variable = { AC_build_amount = 1 }
				#clear_variable = AC_build_amount
				country_event = AC_event.2
			}
		}
		FROM = { set_country_flag = this_investment_offer_pending@PREV }
		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = { target = FROM value < 0 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value < -10 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value < -30 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value < -60 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value < -100 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value < -140 }
			}
			modifier = {
				add = 1
				has_opinion = { target = FROM value < -180 }
			}
			modifier = {
				factor = 2
				has_government = nationalist
			}
			modifier = {
				factor = 1.3
				has_government = neutrality
			}
			modifier = {
				add = 1
				OR = {
					AND = {
						has_government = democratic
						NOT = { FROM = { has_government = democratic } }
					}
					AND = {
						has_government = neutrality
						NOT = { FROM = { has_government = neutrality } }
					}
					AND = {
						has_government = fascism
						NOT = { FROM = { has_government = fascism } }
					}
					AND = {
						has_government = nationalist
						NOT = { FROM = { has_government = nationalist } }
					}
					AND = {
						has_government = communism
						NOT = { FROM = { has_government = communism } }
					}
				}
			}
			modifier = { #More likely if you are a top influencer
				add = 1
				OR = {
					NOT = { check_variable = { influence_array^0 = FROM } }
					NOT = { check_variable = { influence_array^1 = FROM } }
					NOT = { check_variable = { influence_array^2 = FROM } }
				}
			}
			modifier = {
				add = 15
				tag = NKO
			}
		}
	}
}

#Construction Refused
country_event = {
	id = AC_event.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event AC_event.2" }
	title = AC_event.2.t
	desc = AC_event.2.d
	picture = GFX_united_states_dollar

	is_triggered_only = yes

	option = {
		name = AC_event.2.o1
		log = "[GetDateText]: [This.GetName]: AC_event.2.o1 executed"
		clr_country_flag = this_investment_offer_pending@FROM
		add_to_variable = { treasury = AC_build_cost }
		subtract_from_variable = { int_investments = AC_build_cost }
		calculate_int_investments_rate = yes
	}
}

#Construction Cancelled
country_event = {
	id = AC_event.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event AC_event.3" }
	title = AC_event.3.t
	desc = AC_event.3.d
	picture = GFX_united_states_dollar

	is_triggered_only = yes

	option = { name = AC_event.3.o1 log = "[GetDateText]: [This.GetName]: AC_event.3.o1 executed" }
}

