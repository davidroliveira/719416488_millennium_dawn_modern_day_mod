######################
# Written by mkemper #
######################
get_coalition_partner_numbers = {
	set_variable = {
		num_bureau_minus_two_coalition_partners = 0
	}
	set_variable = {
		num_bureau_minus_one_coalition_partners = 0
	}
	set_variable = {
		num_bureau_status_quo_coalition_partners = 0
	}
	set_variable = {
		num_bureau_plus_one_coalition_partners = 0
	}
	set_variable = {
		num_bureau_plus_two_coalition_partners = 0
	}
	set_variable = {
		num_police_minus_two_coalition_partners = 0
	}
	set_variable = {
		num_police_minus_one_coalition_partners = 0
	}
	set_variable = {
		num_police_status_quo_coalition_partners = 0
	}
	set_variable = {
		num_police_plus_one_coalition_partners = 0
	}
	set_variable = {
		num_police_plus_two_coalition_partners = 0
	}
	set_variable = {
		num_education_minus_two_coalition_partners = 0
	}
	set_variable = {
		num_education_minus_one_coalition_partners = 0
	}
	set_variable = {
		num_education_status_quo_coalition_partners = 0
	}
	set_variable = {
		num_education_plus_one_coalition_partners = 0
	}
	set_variable = {
		num_education_plus_two_coalition_partners = 0
	}
	set_variable = {
		num_health_minus_two_coalition_partners = 0
	}
	set_variable = {
		num_health_minus_one_coalition_partners = 0
	}
	set_variable = {
		num_health_status_quo_coalition_partners = 0
	}
	set_variable = {
		num_health_plus_one_coalition_partners = 0
	}
	set_variable = {
		num_health_plus_two_coalition_partners = 0
	}
	set_variable = {
		num_social_minus_two_coalition_partners = 0
	}
	set_variable = {
		num_social_minus_one_coalition_partners = 0
	}
	set_variable = {
		num_social_status_quo_coalition_partners = 0
	}
	set_variable = {
		num_social_plus_one_coalition_partners = 0
	}
	set_variable = {
		num_social_plus_two_coalition_partners = 0
	}
	for_each_loop = {
		array = gov_coalition_array
		value = v
		index = i
		if = {
			limit = {
				check_variable = { v = 0 } # Western_Autocracy
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 1 } # conservatism
			}
			add_to_variable = {
				num_bureau_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_education_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_health_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 2 } # Liberalism
			}
			add_to_variable = {
				num_bureau_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_police_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_education_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 3 } # socialism
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_education_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_two_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 4 } # Communist-State
			}
			add_to_variable = {
				num_bureau_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_education_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 5 } # anarchist_communism
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_education_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_two_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 6 } # Conservative
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 7 } # Autocracy
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_one_coalition_partners = 1
			}

		}
		else_if = {
			limit = {
				check_variable = { v = 8 } # Vilayat
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_education_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_health_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_social_status_quo_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 9 } # Mod_Vilayat
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_health_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 10 } # Kingdom
			}
			add_to_variable = {
				num_bureau_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 11 } # Caliphate
			}
			add_to_variable = {
				num_bureau_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_two_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 12 } # Neutral_Muslim_Brotherhood
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 13 } # Neutral_Autocracy
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 14 } # Neutral_conservatism
			}
			add_to_variable = {
				num_bureau_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_education_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_health_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 15 } # oligarchism
			}
			add_to_variable = {
				num_bureau_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_police_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 16 } # Libertarian
			}
			add_to_variable = {
				num_bureau_minus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_police_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_two_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 17 } # Neutral_Green
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_education_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_two_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 18 } # neutral_Social
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_education_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_two_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 19 } # Neutral_Communism
			}
			add_to_variable = {
				num_bureau_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_education_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 20 } # Nat_Populism
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_health_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_social_status_quo_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 21 } # Nat_Fascism
			}
			add_to_variable = {
				num_bureau_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_education_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_health_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_plus_one_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 22 } # Nat_Autocracy
			}
			add_to_variable = {
				num_bureau_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_two_coalition_partners = 1
			}
			add_to_variable = {
				num_education_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_health_minus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_social_minus_two_coalition_partners = 1
			}
		}
		else_if = {
			limit = {
				check_variable = { v = 23 } # Monarchism
			}
			add_to_variable = {
				num_bureau_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_police_plus_one_coalition_partners = 1
			}
			add_to_variable = {
				num_education_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_health_status_quo_coalition_partners = 1
			}
			add_to_variable = {
				num_social_status_quo_coalition_partners = 1
			}
		}
	}
}

clear_law_desire_flags = {
	clr_country_flag = wants_bureau_01
	clr_country_flag = wants_bureau_02
	clr_country_flag = wants_bureau_03
	clr_country_flag = wants_bureau_04
	clr_country_flag = wants_bureau_05
	clr_country_flag = wants_police_01
	clr_country_flag = wants_police_02
	clr_country_flag = wants_police_03
	clr_country_flag = wants_police_04
	clr_country_flag = wants_police_05
	clr_country_flag = wants_edu_01
	clr_country_flag = wants_edu_02
	clr_country_flag = wants_edu_03
	clr_country_flag = wants_edu_04
	clr_country_flag = wants_edu_05
	clr_country_flag = wants_health_01
	clr_country_flag = wants_health_02
	clr_country_flag = wants_health_03
	clr_country_flag = wants_health_04
	clr_country_flag = wants_health_05
	clr_country_flag = wants_health_06
	clr_country_flag = wants_social_01
	clr_country_flag = wants_social_02
	clr_country_flag = wants_social_03
	clr_country_flag = wants_social_04
	clr_country_flag = wants_social_05
	clr_country_flag = wants_social_06


}

# Bureaucracy desire is chiefly determined by the size/strength of the nation. More powerful the nation, more it wants a higher level of bureaucracy.
# Secondary to size and power of the nation is the GDP of the nation - impoverished nations can't afford an extensive bureaucracy.
recalculate_bureaucracy_desire = {
	set_variable = { bureaucracy_law_desire = 0.0 }
	# Basis of calculation is based upon power of nation.
	if = {
		limit = { has_idea = non_power }
		add_to_variable = { bureaucracy_law_desire = 2.0  } #Non-Powrs want bureau_01
	}
	else_if = {
		limit = { has_idea = minor_power }
		add_to_variable = { bureaucracy_law_desire = 5.0 } # Minor power wants bureau_02
	}
	else_if = {
		limit = {
			OR = {
				has_idea = regional_power
				has_idea = large_power
				has_idea = great_power
			}
		}
		add_to_variable = { bureaucracy_law_desire = 8.0 } #Regional to Major Powers want a mid grade bureau
	}
	else_if = {
		limit = {
			has_idea = superpower
		}
		add_to_variable = { bureaucracy_law_desire = 12.0 } # Superpower wants bureau_04
	}
	# Add modifier based upon completed focuses
	if = {
		limit = { has_completed_focus = CHI_Revolution_in_One_Country }
		add_to_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = CHI_Form_the_Fifth_International }
		add_to_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = CHI_Proper_State_Nationalization }
		add_to_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = FRA_centralization }
		add_to_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = GCC_employment_opportunities }
		add_to_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = UKR_centralization }
		add_to_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = UKR_direct_democracy_idea }
		add_to_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = USA_strengthen_the_federal_reserve }
		add_to_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = BRA_the_internal }
		subtract_from_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = FRA_decentralization }
		subtract_from_variable = { bureaucracy_law_desire = 3.0 }
	}
	if = {
		limit = { has_completed_focus = UKR_federalisation }
		subtract_from_variable = { bureaucracy_law_desire = 3.0}
	}
	# Next, modify based upon GDP/c. Low GDP countries should want lower bureaucracy levels
	if = {
		limit = {
			OR = {
				has_idea = gdp_1
				has_idea = gdp_2
			}
		}
		subtract_from_variable = {
			bureaucracy_law_desire = 6.0 # Extremely impoverished nations want 2 levels lower
		}
	}
	else_if = {
		limit = {
			has_idea = gdp_3
			has_idea = gdp_4
			has_idea = gdp_5
		}
		subtract_from_variable = {
			bureaucracy_law_desire = 3.0 # Impoverished nations want 1 level lower
		}
	}
	# Next, modify base on factories
	if = {
		limit = { num_of_factories < 40 }
		subtract_from_variable = { bureaucracy_law_desire = 3.0 } ##Nations with small economies will hover a lower bureaucracy level
	}
	else_if = {
		limit = {
			num_of_factories > 39
			num_of_factories < 100
		}
		subtract_from_variable = { bureaucracy_law_desire = 2.0 } ##Nations with mid industry will try for a mid grade Bureaucracy
	}
	else_if = {
		limit = { num_of_factories > 100 }
		add_to_variable = { bureaucracy_law_desire = 2.0 } ##All other nations will get a small buff to wanting better cnetralized governments
	}
	# Check based on market conditions
	if = {
		limit = {
			ai_has_acceptable_deficit_factories = no #When deficit becomes unbearable start to reduce!
		}
		subtract_from_variable = { #Reduce spending when possible!
			bureaucracy_law_desire = 6.0
		}
	}
	else_if = {
		limit = {
			ai_has_acceptable_deficit = no #When deficit becomes unbearable start to reduce!
		}
		subtract_from_variable = { #Reduce when issues start becoming more relevant
			bureaucracy_law_desire = 3.0
		}
	}
	# Next, modify based on corruption levels
	if = {
		limit = {
			OR = {
				has_idea = paralyzing_corruption
				has_idea = crippling_corruption
				has_idea = rampant_corruption
			}
		}
		add_to_variable = {
			bureaucracy_law_desire = 6 # Corrupt nations want much larger bureaucratic apparatus for all their cronies
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = unrestrained_corruption
				has_idea = systematic_corruption
				has_idea = widespread_corruption
			}
		}
		add_to_variable = {
			bureaucracy_law_desire = 3 # Moderately corrupt nations want larger bureaucratic apparatus for their cronies
		}
	}
	# Next, modify based on ruling ideology, and thus by coalition partners. This ends up being a little more complicated than I thought at first.
	# Coalition members should want to drag the ruling party toward their own desired point. That means taking into account
	# both the desires of the ruling party *and* that of the coalition partner. If both want -1 level, then the coalition partner
	# should have no impact. If the ruler wants +2 and the coalition partner wants -1, it should have have a subtractive impact.
	# however, if the ruler wants -2 and the coalition partner wants -1, it should have an *additive* impact. Further, must also
	# check for more than one coalition partner - if multiple coalition partners with same desire, there should be more of a drift
	# toward that position than otherwise.
	if = {
		limit = {
			ruling_party_wants_bureaucracy_minus_two = yes
		}
		subtract_from_variable = {
			bureaucracy_law_desire = 6 # Two levels lower
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		multiply_variable = {
			num_bureau_minus_two_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_bureau_minus_one_coalition_partners = 1 # Minimum distance from ruling party, minimum change
		}
		multiply_variable = {
			num_bureau_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_bureau_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_bureau_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = var:num_bureau_minus_two_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_bureau_minus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_bureau_minus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			bureaucracy_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_bureaucracy_minus_one = yes
		}
		subtract_from_variable = {
			bureaucracy_law_desire = 3 # One level lower
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		multiply_variable = {
			num_bureau_minus_two_coalition_partners = 1 # Minor distance from ruling party
		}
		multiply_variable = {
			num_bureau_minus_one_coalition_partners = 1 # Same as ruling party
		}
		multiply_variable = {
			num_bureau_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_bureau_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_bureau_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		subtract_from_variable = {
			bureaucracy_law_desire = 3 # One level lower
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_minus_two_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_bureau_minus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_bureau_minus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_bureau_minus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			bureaucracy_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_bureaucracy_status_quo = yes
		}
		add_to_variable = {
			bureaucracy_law_desire = 0 # No change
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		multiply_variable = {
			num_bureau_minus_two_coalition_partners = 2 # Moderate distance from ruling party
		}
		multiply_variable = {
			num_bureau_minus_one_coalition_partners = 1 # Minor distance from ruling party
		}
		multiply_variable = {
			num_bureau_status_quo_coalition_partners = 1 # Same as ruling party
		}
		multiply_variable = {
			num_bureau_plus_one_coalition_partners = 1 # Minor distance from ruling party
		}
		multiply_variable = {
			num_bureau_plus_two_coalition_partners = 2 # Moderate distance from ruling party
		}
		subtract_from_variable = {
			bureaucracy_law_desire = 3 # One level lower
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_minus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_bureau_status_quo_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_bureau_status_quo_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_bureau_status_quo_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			bureaucracy_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_bureaucracy_plus_one = yes
		}
		add_to_variable = {
			bureaucracy_law_desire = 3 # One level higher
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		multiply_variable = {
			num_bureau_minus_two_coalition_partners = 3 # Major distance from ruling party
		}
		multiply_variable = {
			num_bureau_minus_one_coalition_partners = 2 # Moderate distance from ruling party
		}
		multiply_variable = {
			num_bureau_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_bureau_plus_one_coalition_partners = 1 # Same as ruling party
		}
		multiply_variable = {
			num_bureau_plus_two_coalition_partners = 1 # Minor distance from ruling party
		}
		subtract_from_variable = {
			bureaucracy_law_desire = 3 # One level lower
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_status_quo_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_bureau_plus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_bureau_plus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_bureau_plus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			bureaucracy_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_bureaucracy_plus_two = yes
		}
		add_to_variable = {
			bureaucracy_law_desire = 6 # Two levels higher
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		multiply_variable = {
			num_bureau_minus_two_coalition_partners = 3 # Major distance from ruling party
		}
		multiply_variable = {
			num_bureau_minus_one_coalition_partners = 2 # Moderate distance from party
		}
		multiply_variable = {
			num_bureau_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_bureau_plus_one_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_bureau_plus_two_coalition_partners = 1 # Same as ruling party
		}
		subtract_from_variable = {
			bureaucracy_law_desire = 3 # One level lower
		}
		set_temp_variable = {
			coalition_law_modifier = 0
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_bureau_plus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_bureau_plus_two_coalition_partners
		# }
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_bureau_plus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_bureau_plus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			bureaucracy_law_desire = coalition_law_modifier
		}
	}
	# Finally, set country flag based on result.
	if = {
		limit = {
			check_variable = {
				bureaucracy_law_desire < 4
			}
		}
		set_country_flag = wants_bureau_01
	}
	else_if = {
		limit = {
			check_variable = {
				bureaucracy_law_desire < 7
			}
		}
		set_country_flag = wants_bureau_02
	}
	else_if = {
		limit = {
			check_variable = {
				bureaucracy_law_desire < 10
			}
		}
		set_country_flag = wants_bureau_03
	}
	else_if = {
		limit = {
			check_variable = {
				bureaucracy_law_desire < 13
			}
		}
		set_country_flag = wants_bureau_04
	}
	else_if = {
		limit = {
			check_variable = {
				var = bureaucracy_law_desire
				value = 13
				compare = greater_than_or_equals
			}
		}
		set_country_flag = wants_bureau_05
	}
}

# Police desire should tend to gravitate toward the middle (police_03) in most nations. This is also affected by politics - repressive governments
# want more police apparatus than more liberal/libertarian ones. Also influenced by GDP - impoverished nations cannot afford large police forces.
recalculate_police_desire = {
	set_variable = {
		police_law_desire = 0.0
	}
	# First, set desire based upon GDP. Poverty tends toward low values, all else toward middling.
	if = {
		limit = {
			has_idea = gdp_1
		}
		add_to_variable = {
			police_law_desire = 2.0 # police_01
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_2
				has_idea = gdp_3
				has_idea = gdp_4
			}
		}
		add_to_variable = {
			police_law_desire = 5.0 # police_02
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_5
				has_idea = gdp_6
				has_idea = gdp_7
				has_idea = gdp_8
				has_idea = gdp_9
				has_idea = gdp_10
				has_idea = gdp_11
				has_idea = gdp_12
			}
		}
		add_to_variable = {
			police_law_desire = 8.0 # police_03
		}
	}
	# Adjust based on national focuses completed
	if = {
		limit = {
			has_completed_focus = FRA_stricter_policing
		}
		add_to_variable = {
			police_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = FRA_reduction_of_press
		}
		add_to_variable = {
			police_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = FRA_heavier_policing
		}
		add_to_variable = {
			police_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = GCC_bolster_the_security_services
		}
		add_to_variable = {
			police_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = NIG_federal_policing
		}
		add_to_variable = {
			police_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = UKR_police_reform
		}
		add_to_variable = {
			police_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = USA_increased_cia_investment
		}
		add_to_variable = {
			police_law_desire = 3.0
		}
	}
	##
	if = {
		limit = {
			check_variable = { treasury_rate < -1.0 }
		}
		subtract_from_variable = { #Reduce spending when possible!
			police_law_desire = 6.0
		}
	}
	else_if = {
		limit = {
			check_variable = { treasury_rate < -0.50 }
		}
		subtract_from_variable = { #Reduce when issues start becoming more relevant
			police_law_desire = 3.0
		}
	}
	# Next, modify based upon ruling ideology and coalition partners.
	set_temp_variable = {
		coalition_law_modifier = 0
	}
	if = {
		limit = {
			ruling_party_wants_police_minus_two = yes
		}
		subtract_from_variable = {
			police_law_desire = 6.0
		}
		multiply_variable = {
			num_police_minus_two_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_police_minus_one_coalition_partners = 1 # Minimum distance from ruling party, minimum change
		}
		multiply_variable = {
			num_police_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_police_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_police_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_police_minus_two_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_police_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_police_minus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_police_minus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			police_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_police_minus_one = yes
		}
		subtract_from_variable = {
			police_law_desire = 3.0
		}
		multiply_variable = {
			num_police_minus_two_coalition_partners = 1 # Minimum distance, minimum change
		}
		multiply_variable = {
			num_police_minus_one_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_police_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_police_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_police_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_minus_two_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_police_minus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_police_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_police_minus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_police_minus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			police_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_police_status_quo = yes
		}
		add_to_variable = {
			police_law_desire = 0.0
		}
		multiply_variable = {
			num_police_minus_two_coalition_partners = 2 # moderate distance, moderate change
		}
		multiply_variable = {
			num_police_minus_one_coalition_partners = 1 # minor distance, minor change
		}
		multiply_variable = {
			num_police_status_quo_coalition_partners = 1 # same as ruling party
		}
		multiply_variable = {
			num_police_plus_one_coalition_partners = 1 # minor distance, minor change
		}
		multiply_variable = {
			num_police_plus_two_coalition_partners = 2 # moderate distance, moderate change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_minus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_police_status_quo_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_police_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_police_status_quo_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_police_status_quo_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			police_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_police_plus_one = yes
		}
		add_to_variable = {
			police_law_desire = 3.0
		}
		multiply_variable = {
			num_police_minus_two_coalition_partners = 3 # Major distance, Major change
		}
		multiply_variable = {
			num_police_minus_one_coalition_partners = 2 # Moderate distance, moderate change
		}
		multiply_variable = {
			num_police_status_quo_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_police_plus_one_coalition_partners = 1 # Same as ruling party
		}
		multiply_variable = {
			num_police_plus_two_coalition_partners = 1 # minor distance, minor change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_status_quo_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_police_plus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_police_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_police_plus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_police_plus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			police_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_police_plus_two = yes
		}
		add_to_variable = {
			police_law_desire = 6.0
		}
		multiply_variable = {
			num_police_minus_two_coalition_partners = 3 # Major distance, Major change
		}
		multiply_variable = {
			num_police_minus_one_coalition_partners = 2 # Moderate distance, moderate change
		}
		multiply_variable = {
			num_police_status_quo_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_police_plus_one_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_police_plus_two_coalition_partners = 1 # Same as ruling party
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_police_plus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_police_plus_two_coalition_partners
		# }
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_police_plus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_police_plus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			police_law_desire = coalition_law_modifier
		}
	}

	# Finally, set country flag based on result.
	if = {
		limit = {
			check_variable = {
				police_law_desire < 4
			}
		}
		set_country_flag = wants_police_01
	}
	else_if = {
		limit = {
			check_variable = {
				police_law_desire < 7
			}
		}
		set_country_flag = wants_police_02
	}
	else_if = {
		limit = {
			check_variable = {
				police_law_desire < 10
			}
		}
		set_country_flag = wants_police_03
	}
	else_if = {
		limit = {
			check_variable = {
				police_law_desire < 13
			}
		}
		set_country_flag = wants_police_04
	}
	else_if = {
		limit = {
			check_variable = {
				var = police_law_desire
				value = 13
				compare = greater_than_or_equals
			}
		}
		set_country_flag = wants_police_05
	}
}

# Education desire is highly dependent on wealth and development level. Underdeveloped or developing nations should have edu_01 or edu_02.
# Most developed nations should never go below edu_03. Richer nations should have edu_04. Also dependent on political policies.
recalculate_edu_desire = {
	set_variable = {
		edu_law_desire = 0.0
	}
	# First, set base from GDP
	if = {
		limit = {
			has_idea = gdp_1
		}
		add_to_variable = {
			edu_law_desire = 2.0 # edu_01
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_2
				has_idea = gdp_3
				has_idea = gdp_4
			}
		}
		add_to_variable = {
			edu_law_desire = 5.0 # edu_02
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_5
				has_idea = gdp_6
				has_idea = gdp_7
				has_idea = gdp_8
				has_idea = gdp_9
			}
		}
		add_to_variable = {
			edu_law_desire = 8.0 # edu_03
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_10
				has_idea = gdp_11
				has_idea = gdp_12
			}
		}
		add_to_variable = {
			edu_law_desire = 11.0 # edu_04
		}
	}
	# Adjust based on completed national focuses
	if = {
		limit = {
			has_completed_focus = BRA_bolsa_familia
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = ETH_education_program
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = FRA_competitive_education
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = ITA_modern_education
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = ITA_increase_funding_for_research
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = NIG_education_programs
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = POL_education_reform
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = POL_schools
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = POL_new_schools
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = SOV_education_reform
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = SOV_european_university_connections
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = SOV_encourage_free_thought
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = SYR_education_reform
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = UKR_education_reform
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = USA_free_college
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = USA_education_reform
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = FRA_censorship_in_education
		}
		subtract_from_variable = {
			edu_law_desire = 3.0
		}
	}

	##Edit based on factories
	if = {
		limit = {
			num_of_factories < 40
		}
		subtract_from_variable = {  #Can't afford a crazy amount of education
			edu_law_desire = 6.0
		}
	}
	else_if = {
		limit = {
			num_of_factories > 39
			num_of_factories < 80
		}
		subtract_from_variable = { ##Just one level lower
 			edu_law_desire = 3.0
		}
	}
	else_if = {
		limit = { ##Great
			num_of_factories > 79
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
	}
	##
	if = {
		limit = {
			check_variable = { treasury_rate < -1.0 }
		}
		subtract_from_variable = { #Reduce spending when possible!
			edu_law_desire = 6.0
		}
	}
	else_if = {
		limit = {
			check_variable = { treasury_rate < -0.50 }
		}
		subtract_from_variable = { #Reduce when issues start becoming more relevant
			edu_law_desire = 3.0
		}
	}
	# Next, modify based upon ruling ideology and coalition partners.
	set_temp_variable = {
		coalition_law_modifier = 0
	}
	if = {
		limit = {
			ruling_party_wants_edu_minus_two = yes
		}
		subtract_from_variable = {
			edu_law_desire = 6.0
		}
		multiply_variable = {
			num_edu_minus_two_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_edu_minus_one_coalition_partners = 1 # Minimum distance from ruling party, minimum change
		}
		multiply_variable = {
			num_edu_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_edu_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_edu_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_edu_minus_two_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_edu_minus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_edu_minus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			edu_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_edu_minus_one = yes
		}
		subtract_from_variable = {
			edu_law_desire = 3.0
		}
		multiply_variable = {
			num_edu_minus_two_coalition_partners = 1 # Minimum distance, minimum change
		}
		multiply_variable = {
			num_edu_minus_one_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_edu_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_edu_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_edu_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_minus_two_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_edu_minus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_edu_minus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_edu_minus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			edu_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_edu_status_quo = yes
		}
		add_to_variable = {
			edu_law_desire = 0.0
		}
		multiply_variable = {
			num_edu_minus_two_coalition_partners = 2 # moderate distance, moderate change
		}
		multiply_variable = {
			num_edu_minus_one_coalition_partners = 1 # minor distance, minor change
		}
		multiply_variable = {
			num_edu_status_quo_coalition_partners = 1 # same as ruling party
		}
		multiply_variable = {
			num_edu_plus_one_coalition_partners = 1 # minor distance, minor change
		}
		multiply_variable = {
			num_edu_plus_two_coalition_partners = 2 # moderate distance, moderate change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_minus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_edu_status_quo_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_edu_status_quo_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_edu_status_quo_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			edu_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_edu_plus_one = yes
		}
		add_to_variable = {
			edu_law_desire = 3.0
		}
		multiply_variable = {
			num_edu_minus_two_coalition_partners = 3 # Major distance, Major change
		}
		multiply_variable = {
			num_edu_minus_one_coalition_partners = 2 # Moderate distance, moderate change
		}
		multiply_variable = {
			num_edu_status_quo_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_edu_plus_one_coalition_partners = 1 # Same as ruling party
		}
		multiply_variable = {
			num_edu_plus_two_coalition_partners = 1 # minor distance, minor change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_status_quo_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_edu_plus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_edu_plus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_edu_plus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			edu_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_edu_plus_two = yes
		}
		add_to_variable = {
			edu_law_desire = 6.0
		}
		multiply_variable = {
			num_edu_minus_two_coalition_partners = 3 # Major distance, Major change
		}
		multiply_variable = {
			num_edu_minus_one_coalition_partners = 2 # Moderate distance, moderate change
		}
		multiply_variable = {
			num_edu_status_quo_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_edu_plus_one_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_edu_plus_two_coalition_partners = 1 # Same as ruling party
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_edu_plus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_edu_plus_two_coalition_partners
		# }
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_edu_plus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_edu_plus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			edu_law_desire = coalition_law_modifier
		}
	}

	# Finally, set country flag based on result.
	if = {
		limit = {
			check_variable = {
				edu_law_desire < 4
			}
		}
		set_country_flag = wants_edu_01
	}
	else_if = {
		limit = {
			check_variable = {
				edu_law_desire < 7
			}
		}
		set_country_flag = wants_edu_02
	}
	else_if = {
		limit = {
			check_variable = {
				edu_law_desire < 10
			}
		}
		set_country_flag = wants_edu_03
	}
	else_if = {
		limit = {
			check_variable = {
				edu_law_desire < 13
			}
		}
		set_country_flag = wants_edu_04
	}
	else_if = {
		limit = {
			check_variable = {
				var = edu_law_desire
				value = 13
				compare = greater_than_or_equals
			}
		}
		set_country_flag = wants_edu_05
	}
}

# Health is again highly dependent on development.
recalculate_health_desire = {
	set_variable = {
		health_law_desire = 0.0
	}
	# First, set base from GDP
	if = {
		limit = {
			has_idea = gdp_1
		}
		add_to_variable = {
			health_law_desire = 2.0 # health_01
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_2
			}
		}
		add_to_variable = {
			health_law_desire = 5.0 # health_02
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_3
				has_idea = gdp_4
				has_idea = gdp_5
			}
		}
		add_to_variable = {
			health_law_desire = 8.0 # health_03
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_6
				has_idea = gdp_7
			}
		}
		add_to_variable = {
			health_law_desire = 11.0 # health_04
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_8
				has_idea = gdp_9
			}
		}
		add_to_variable = {
			health_law_desire = 14.0 # health_05
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_10
				has_idea = gdp_11
				has_idea = gdp_12
			}
		}
		add_to_variable = {
			health_law_desire = 17.0 # health_06
		}
	}
	# Adjust based on national focuses
	if = {
		limit = {
			has_completed_focus = BRA_socialism_in_concept
		}
		add_to_variable = {
			health_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = FRA_reformed_universal_healthcare
		}
		add_to_variable = {
			health_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = NIG_national_health_care_service
		}
		add_to_variable = {
			health_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = POL_hospitals
		}
		add_to_variable = {
			health_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = POL_monarch_healthcare
		}
		add_to_variable = {
			health_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = SYR_healthcare_reform
		}
		add_to_variable = {
			health_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = UKR_health_care_reform
		}
		add_to_variable = {
			health_law_desire = 3.0
		}
	}
	##
	##
	if = {
		limit = {
			check_variable = { treasury_rate < -1.0 }
		}
		subtract_from_variable = { #Reduce spending when possible!
			health_law_desire = 6.0
		}
	}
	else_if = {
		limit = {
			check_variable = { treasury_rate < -0.50 }
		}
		subtract_from_variable = { #Reduce when issues start becoming more relevant
			health_law_desire = 3.0
		}
	}

	# Next, modify based upon ruling ideology and coalition partners.
	set_temp_variable = {
		coalition_law_modifier = 0
	}
	if = {
		limit = {
			ruling_party_wants_health_minus_two = yes
		}
		subtract_from_variable = {
			health_law_desire = 6.0
		}
		multiply_variable = {
			num_health_minus_two_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_health_minus_one_coalition_partners = 1 # Minimum distance from ruling party, minimum change
		}
		multiply_variable = {
			num_health_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_health_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_health_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_health_minus_two_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_health_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_health_minus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_health_minus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			health_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_health_minus_one = yes
		}
		subtract_from_variable = {
			health_law_desire = 3.0
		}
		multiply_variable = {
			num_health_minus_two_coalition_partners = 1 # Minimum distance, minimum change
		}
		multiply_variable = {
			num_health_minus_one_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_health_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_health_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_health_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_minus_two_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_health_minus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_health_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_health_minus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_health_minus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			health_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_health_status_quo = yes
		}
		add_to_variable = {
			health_law_desire = 0.0
		}
		multiply_variable = {
			num_health_minus_two_coalition_partners = 2 # moderate distance, moderate change
		}
		multiply_variable = {
			num_health_minus_one_coalition_partners = 1 # minor distance, minor change
		}
		multiply_variable = {
			num_health_status_quo_coalition_partners = 1 # same as ruling party
		}
		multiply_variable = {
			num_health_plus_one_coalition_partners = 1 # minor distance, minor change
		}
		multiply_variable = {
			num_health_plus_two_coalition_partners = 2 # moderate distance, moderate change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_minus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_health_status_quo_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_health_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_health_status_quo_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_health_status_quo_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			health_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_health_plus_one = yes
		}
		add_to_variable = {
			health_law_desire = 3.0
		}
		multiply_variable = {
			num_health_minus_two_coalition_partners = 3 # Major distance, Major change
		}
		multiply_variable = {
			num_health_minus_one_coalition_partners = 2 # Moderate distance, moderate change
		}
		multiply_variable = {
			num_health_status_quo_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_health_plus_one_coalition_partners = 1 # Same as ruling party
		}
		multiply_variable = {
			num_health_plus_two_coalition_partners = 1 # minor distance, minor change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_status_quo_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_health_plus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_health_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_health_plus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_health_plus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			health_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_health_plus_two = yes
		}
		add_to_variable = {
			health_law_desire = 6.0
		}
		multiply_variable = {
			num_health_minus_two_coalition_partners = 3 # Major distance, Major change
		}
		multiply_variable = {
			num_health_minus_one_coalition_partners = 2 # Moderate distance, moderate change
		}
		multiply_variable = {
			num_health_status_quo_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_health_plus_one_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_health_plus_two_coalition_partners = 1 # Same as ruling party
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_health_plus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_health_plus_two_coalition_partners
		# }
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_health_plus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_health_plus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			health_law_desire = coalition_law_modifier
		}
	}

	# Finally, set country flag based on result.
	if = {
		limit = {
			check_variable = {
				health_law_desire < 4
			}
		}
		set_country_flag = wants_health_01
	}
	else_if = {
		limit = {
			check_variable = {
				health_law_desire < 7
			}
		}
		set_country_flag = wants_health_02
	}
	else_if = {
		limit = {
			check_variable = {
				health_law_desire < 10
			}
		}
		set_country_flag = wants_health_03
	}
	else_if = {
		limit = {
			check_variable = {
				health_law_desire < 13
			}
		}
		set_country_flag = wants_health_04
	}
	else_if = {
		limit = {
			check_variable = {
				health_law_desire < 16
			}
		}
		set_country_flag = wants_health_05
	}
	else_if = {
		limit = {
			check_variable = {
				var = health_law_desire
				value = 16
				compare = greater_than_or_equals
			}
		}
		set_country_flag = wants_health_06
	}
}

# Welfare is highly dependent on development, but with more GDP categories skewing lower.
recalculate_social_desire = {
	set_variable = {
		social_law_desire = 0.0
	}
	# First, set base from GDP
	if = {
		limit = {
			has_idea = gdp_1
			has_idea = gdp_2
		}
		add_to_variable = {
			social_law_desire = 2.0 # social_01
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_3
				has_idea = gdp_4
			}
		}
		add_to_variable = {
			social_law_desire = 5.0 # social_02
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_5
				has_idea = gdp_6
			}
		}
		add_to_variable = {
			social_law_desire = 8.0 # social_03
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_7
				has_idea = gdp_8
				has_idea = gdp_9
				has_idea = gdp_10
			}
		}
		add_to_variable = {
			social_law_desire = 11.0 # social_04
		}
	}
	else_if = {
		limit = {
			OR = {
				has_idea = gdp_11
				has_idea = gdp_12
			}
		}
		add_to_variable = {
			social_law_desire = 14.0 # social_05
		}
	}
	# Add modifiers based upon completed focuses, to prevent AI countries from immediately changing again
	if = {
		limit = {
			has_completed_focus = BRA_fome_zero
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = GER_pension_reform
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = GCC_deepen_the_safety_net
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = NIG_poverty_issues
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = NIG_expand_the_safety_net
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = POL_family
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = POL_seniors
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = POL_monarch_welfare
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = CHI_Break_the_Iron_Rice_Bowl
		}
		subtract_from_variable = {
			social_law_desire = 3.0
		}
	}
	if = {
		limit = {
			has_completed_focus = GCC_shrink_the_safety_net
		}
		subtract_from_variable = {
			social_law_desire = 3.0
		}
	}
	##
	if = {
		limit = {
			check_variable = { treasury_rate < -1.0 }
		}
		subtract_from_variable = { #Reduce spending when possible!
			social_law_desire = 6.0
		}
	}
	else_if = {
		limit = {
			check_variable = { treasury_rate < -0.50 }
		}
		subtract_from_variable = { #Reduce when issues start becoming more relevant
			social_law_desire = 3.0
		}
	}
	# Next, modify based upon ruling ideology and coalition partners.
	set_temp_variable = {
		coalition_law_modifier = 0
	}
	if = {
		limit = {
			ruling_party_wants_social_minus_two = yes
		}
		subtract_from_variable = {
			social_law_desire = 6.0
		}
		multiply_variable = {
			num_social_minus_two_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_social_minus_one_coalition_partners = 1 # Minimum distance from ruling party, minimum change
		}
		multiply_variable = {
			num_social_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_social_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_social_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_social_minus_two_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_social_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_social_minus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_social_minus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			social_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_social_minus_one = yes
		}
		subtract_from_variable = {
			social_law_desire = 3.0
		}
		multiply_variable = {
			num_social_minus_two_coalition_partners = 1 # Minimum distance, minimum change
		}
		multiply_variable = {
			num_social_minus_one_coalition_partners = 1 # Same desire as ruling party
		}
		multiply_variable = {
			num_social_status_quo_coalition_partners = 1 # Minor distance from ruling party, minor change
		}
		multiply_variable = {
			num_social_plus_one_coalition_partners = 2 # Moderate distance from ruling party, moderate change
		}
		multiply_variable = {
			num_social_plus_two_coalition_partners = 3 # Major distance from ruling party, major change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_minus_two_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_social_minus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_social_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_social_minus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_social_minus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			social_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_social_status_quo = yes
		}
		add_to_variable = {
			social_law_desire = 0.0
		}
		multiply_variable = {
			num_social_minus_two_coalition_partners = 2 # moderate distance, moderate change
		}
		multiply_variable = {
			num_social_minus_one_coalition_partners = 1 # minor distance, minor change
		}
		multiply_variable = {
			num_social_status_quo_coalition_partners = 1 # same as ruling party
		}
		multiply_variable = {
			num_social_plus_one_coalition_partners = 1 # minor distance, minor change
		}
		multiply_variable = {
			num_social_plus_two_coalition_partners = 2 # moderate distance, moderate change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_minus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_social_status_quo_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_social_plus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_social_status_quo_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_social_status_quo_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			social_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_social_plus_one = yes
		}
		add_to_variable = {
			social_law_desire = 3.0
		}
		multiply_variable = {
			num_social_minus_two_coalition_partners = 3 # Major distance, Major change
		}
		multiply_variable = {
			num_social_minus_one_coalition_partners = 2 # Moderate distance, moderate change
		}
		multiply_variable = {
			num_social_status_quo_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_social_plus_one_coalition_partners = 1 # Same as ruling party
		}
		multiply_variable = {
			num_social_plus_two_coalition_partners = 1 # minor distance, minor change
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_status_quo_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_social_plus_one_coalition_partners
		# }
		add_to_temp_variable = {
			coalition_law_modifier = num_social_plus_two_coalition_partners
		}
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_social_plus_one_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_social_plus_one_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			social_law_desire = coalition_law_modifier
		}
	}
	else_if = {
		limit = {
			ruling_party_wants_social_plus_two = yes
		}
		add_to_variable = {
			social_law_desire = 6.0
		}
		multiply_variable = {
			num_social_minus_two_coalition_partners = 3 # Major distance, Major change
		}
		multiply_variable = {
			num_social_minus_one_coalition_partners = 2 # Moderate distance, moderate change
		}
		multiply_variable = {
			num_social_status_quo_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_social_plus_one_coalition_partners = 1 # Minor distance, minor change
		}
		multiply_variable = {
			num_social_plus_two_coalition_partners = 1 # Same as ruling party
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_minus_two_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_minus_one_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_status_quo_coalition_partners
		}
		add_to_temp_variable = {
			coalition_law_modifier = num_social_plus_one_coalition_partners
		}
		# add_to_temp_variable = {
		# 	coalition_law_modifier = num_social_plus_two_coalition_partners
		# }
		if = {
			limit = {
				check_variable = {
					coalition_law_modifier > 0
				}
			}
			subtract_from_temp_variable = {
				coalition_law_modifier = num_social_plus_two_coalition_partners
			}
		}
		else_if = {
			limit = {
				check_variable = {
					coalition_law_modifier < 0
				}
			}
			add_to_temp_variable = {
				coalition_law_modifier = num_social_plus_two_coalition_partners
			}
		}
		clamp_temp_variable = { # Clamp maximum effect of coalition partners to prevent massive shift from ruling party desires
			var = coalition_law_modifier
			min = -5
			max = 5
		}
		add_to_variable = {
			social_law_desire = coalition_law_modifier
		}
	}

	# Finally, set country flag based on result.
	if = {
		limit = {
			check_variable = {
				social_law_desire < 4
			}
		}
		set_country_flag = wants_social_01
	}
	else_if = {
		limit = {
			check_variable = {
				social_law_desire < 7
			}
		}
		set_country_flag = wants_social_02
	}
	else_if = {
		limit = {
			check_variable = {
				social_law_desire < 10
			}
		}
		set_country_flag = wants_social_03
	}
	else_if = {
		limit = {
			check_variable = {
				social_law_desire < 13
			}
		}
		set_country_flag = wants_social_04
	}
	else_if = {
		limit = {
			check_variable = {
				social_law_desire < 16
			}
		}
		set_country_flag = wants_social_05
	}
	else_if = {
		limit = {
			check_variable = {
				var = social_law_desire
				value = 16
				compare = greater_than_or_equals
			}
		}
		set_country_flag = wants_social_06
	}
}

##Military Laws
recalculate_defence_spending_desire = {
	set_variable = { defence_spending_desire = 0 }
	#Base Calc is based on Power
	if = {
		limit = { has_idea = non_power }
		add_to_variable = { defence_spending_desire = 1 } #Non_powers WANT 00 - 04 due to budget
	}
	else_if = {
		limit = { has_idea = minor_power }
		add_to_variable = { defence_spending_desire = 2 }
	}
	else_if = {
		limit = { has_idea = regional_power }
		add_to_variable = { defence_spending_desire = 4 }
	}
	else_if = {
		limit = { has_idea = large_power }
		add_to_variable = { defence_spending_desire = 6 }
	}
	else_if = {
		limit = { has_idea = great_power }
		add_to_variable = { defence_spending_desire = 8 }
	}
	else_if = {
		limit = { has_idea = superpower }
		add_to_variable = { defence_spending_desire = 12 }
	}

	#Focuses that increase military spending
	if = {
		limit = { has_completed_focus = CHI_Strategic_Industries }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = JAP_mobilize_the_population }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = POL_defense }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = POL_monarch_army }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = SOV_2008_military_reforms }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = SOV_increase_military_spending }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = SOV_reformed_russian_armed_forces }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = SOV_army_of_the_republic }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = SOV_military_reform }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = USA_encourage_the_volunteers }
		add_to_variable = { defence_spending_desire = 2 }
	}
	if = {
		limit = { has_completed_focus = USA_expand_the_national_guard }
		add_to_variable = { defence_spending_desire = 2 }
	}

	##Economic Factors
	if = {
		limit = { num_of_military_factories > 5 }
		add_to_variable = { defence_spending_desire = 1 }
	}
	if = {
		limit = { num_of_military_factories > 10 }
		add_to_variable = { defence_spending_desire = 1 }
	}
	if = {
		limit = { num_of_military_factories > 15 }
		add_to_variable = { defence_spending_desire = 1 }
	}
	if = {
		limit = { num_of_military_factories > 25 }
		add_to_variable = { defence_spending_desire = 1 }
	}
	if = {
		limit = { num_of_military_factories > 40 }
		add_to_variable = { defence_spending_desire = 1 }
	}
	if = {
		limit = { num_of_military_factories > 60 }
		add_to_variable = { defence_spending_desire = 1 }
	}
	if = {
		limit = { num_of_military_factories > 80 }
		add_to_variable = { defence_spending_desire = 1 }
	}
	if = {
		limit = { num_of_military_factories > 100 }
		add_to_variable = { defence_spending_desire = 1 }
	}

	if = {
		limit = {
			ai_has_acceptable_deficit_factories = no #When deficit becomes unbearable start to reduce!
		}
		subtract_from_variable = { #Reduce spending when possible!
			defence_spending_desire = 7.0
		}
	}
	else_if = {
		limit = {
			ai_has_acceptable_deficit = no #When deficit becomes unbearable start to reduce!
		}
		subtract_from_variable = { #Reduce spending when possible!
			defence_spending_desire = 7.0
		}
	}

	if = {
		limit = { ruling_party_in_favor_of_higher_military_spending = yes }
		add_to_variable = { defence_spending_desire = 5 }
	}
	else = {
		subtract_from_variable = { defence_spending_desire = 5 }
	}

	if = {
		limit = { check_variable = { defence_spending_desire > 15 } }
		set_country_flag = wants_defence_00
	}

}


# Wrapper function to do everything in one place.
recalculate_law_desires = {
	clear_law_desire_flags = yes # First, clear law desire flags.
	get_coalition_partner_numbers = yes # Next, get coalition partner modifiers.
	recalculate_bureaucracy_desire = yes
	recalculate_police_desire = yes
	recalculate_edu_desire = yes
	recalculate_health_desire = yes
	recalculate_social_desire = yes
}

focus_on_laws_due_to_economic_despair = {
	if = {
		limit = {
			NOT = { has_country_flag = AI_economic_downspiral }
			OR = {
				check_variable = { treasury_rate < -2.4 }
				check_variable = { bankrupcy_check < debt_rate }
				has_idea = depression
				has_idea = recession
				ai_has_major_economic_problems = yes
				ai_has_moderate_economic_problems = yes
			}
		}
		set_country_flag = AI_economic_downspiral
		log = "[GetDateText]: [Root.GetName]: AI Scripted Trigger: focus_on_laws_due_to_economic_despair fired"
	}
	else_if = {
		limit = {
			has_country_flag = AI_economic_downspiral
			OR = {
				check_variable = { treasury_rate > -2.6 }
				check_variable = { bankrupcy_check > debt_rate }
				NOT = {
					has_idea = depression
					has_idea = recession
				}
			}
		}
		log = "[GetDateText]: [Root.GetName]: AI Scripted Trigger: focus_on_laws_due_to_economic_despair removed" #To log when the AI actuall needs to fire these
		clr_country_flag = AI_economic_downspiral
	}
}